import{$ as E,Aa as N,Bb as L,C as _,Cb as j,D as C,Db as A,Eb as B,Fb as R,Ha as W,Ib as U,Ka as q,L as r,M as f,Ob as $,R as g,Tb as G,U as a,Ub as H,W as o,X as n,Xb as J,Y as k,Zb as K,ba as I,ca as p,e as v,i as y,ia as M,ja as s,ka as P,l as w,la as u,ma as O,na as h,o as S,oa as b,pa as T,q as x,qa as V,y as D,za as F,zb as z}from"./chunk-RNS2DTMV.js";var Q=()=>["/posts"];function X(e,l){e&1&&(o(0,"div",6)(1,"div",7)(2,"p"),s(3,"Loading post details..."),n(),k(4,"mat-spinner",8),n()())}function Y(e,l){e&1&&(o(0,"div",30),s(1," No comments yet "),n())}function Z(e,l){if(e&1&&(o(0,"div",33)(1,"p",34),s(2),n(),o(3,"p",35),s(4),o(5,"i"),s(6),n()()()),e&2){let t=l.$implicit;r(2),P(t.body),r(2),u("- ",t.name," "),r(2),u("(",t.email,")")}}function tt(e,l){if(e&1&&(o(0,"div",31),g(1,Z,7,3,"div",32),n()),e&2){let t=p(2);r(),a("ngForOf",t.postDetails.comments)}}function nt(e,l){e&1&&(o(0,"div",36),s(1," Name is required "),n())}function et(e,l){e&1&&(o(0,"div",36),s(1," Valid email is required "),n())}function ot(e,l){e&1&&(o(0,"div",36),s(1," Comment is required "),n())}function it(e,l){if(e&1){let t=E();o(0,"div",9)(1,"div",10)(2,"a",11),s(3,"\u2190 Back to Posts"),n()(),o(4,"div",12)(5,"h1"),s(6),n(),o(7,"p",13),s(8),n()(),o(9,"div",14)(10,"p"),s(11),n()(),o(12,"div",15)(13,"h2"),s(14,"Comments"),n(),g(15,Y,2,0,"div",16)(16,tt,2,1,"div",17),o(17,"div",18)(18,"form",19,0),I("submit",function(){_(t);let i=p();return C(i.addComment())}),o(20,"div",20)(21,"label",21),s(22,"Name *"),n(),o(23,"input",22,1),b("ngModelChange",function(i){_(t);let c=p();return h(c.newComment.name,i)||(c.newComment.name=i),C(i)}),n(),g(25,nt,2,0,"div",23),n(),o(26,"div",20)(27,"label",24),s(28,"Email *"),n(),o(29,"input",25,2),b("ngModelChange",function(i){_(t);let c=p();return h(c.newComment.email,i)||(c.newComment.email=i),C(i)}),n(),g(31,et,2,0,"div",23),n(),o(32,"div",26)(33,"label",27),s(34,"Comment *"),n(),o(35,"textarea",28,3),b("ngModelChange",function(i){_(t);let c=p();return h(c.newComment.body,i)||(c.newComment.body=i),C(i)}),n(),g(37,ot,2,0,"div",23),n(),o(38,"button",29),s(39,"Add Comment"),n()()()()()}if(e&2){let t=M(19),m=M(24),i=M(30),c=M(36),d=p();r(2),a("routerLink",V(13,Q)),r(4),P(d.postDetails.post.title),r(2),u("By ",d.postDetails.author==null?null:d.postDetails.author.name,""),r(3),P(d.postDetails.post.body),r(4),a("ngIf",!d.postDetails.comments.length),r(),a("ngIf",d.postDetails.comments.length),r(7),O("ngModel",d.newComment.name),r(2),a("ngIf",m.invalid&&(m.dirty||m.touched)),r(4),O("ngModel",d.newComment.email),r(2),a("ngIf",i.invalid&&(i.dirty||i.touched)),r(4),O("ngModel",d.newComment.body),r(2),a("ngIf",c.invalid&&(c.dirty||c.touched)),r(),a("disabled",d.loading||!t.form.valid)}}var Ct=(()=>{class e{constructor(t,m,i,c){this.route=t,this.snackbarService=m,this.postService=i,this.commentsService=c,this.postDetails=null,this.loading=!0,this.subscription=null,this.destroy$=new v,this.newComment={name:"",email:"",body:""}}ngOnInit(){this.setupRouteSubscription()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.destroy$.next(),this.destroy$.complete()}setupRouteSubscription(){this.subscription=this.route.paramMap.pipe(y(t=>t.get("id")),w(t=>!!t),S(),x(this.destroy$)).subscribe(t=>{t&&this.postService.getPostDetails(parseInt(t)).subscribe(m=>{this.postDetails=m,this.loading=!1})})}addComment(){if(!this.postDetails){this.snackbarService.showError("Post details not available",3e3);return}if(!this.newComment.body.trim()){this.snackbarService.showError("Comment cannot be empty",3e3);return}let t={name:this.newComment.name,email:this.newComment.email,body:this.newComment.body,postId:this.postDetails.post.id,id:+`${new Date().getTime()}${Math.floor(Math.random()*1e3)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"pending"};this.loading=!0,this.commentsService.addComment(t).pipe(x(this.destroy$)).subscribe({next:m=>{this.postDetails&&(this.postDetails.comments?.length||(this.postDetails.comments=[]),this.postDetails.comments.push(m)),this.newComment={name:"",email:"",body:""},this.snackbarService.showSuccess("Comment added successfully",3e3),this.loading=!1},error:m=>{console.error("Error adding comment:",m),this.snackbarService.showError("Failed to add comment",3e3),this.loading=!1}})}static{this.\u0275fac=function(m){return new(m||e)(f(W),f(H),f(K),f(J))}}static{this.\u0275cmp=D({type:e,selectors:[["app-post-details"]],standalone:!0,features:[T],decls:2,vars:2,consts:[["commentForm","ngForm"],["name","ngModel"],["email","ngModel"],["body","ngModel"],["class","loading-container",4,"ngIf"],["class","post-details",4,"ngIf"],[1,"loading-container"],[1,"loading-content"],["diameter","24"],[1,"post-details"],[1,"back-button"],[1,"button",3,"routerLink"],[1,"post-header"],[1,"author"],[1,"post-content"],[1,"comments-section"],["class","no-comments",4,"ngIf"],["class","comments-list",4,"ngIf"],[1,"comment-form"],[3,"submit"],[1,"form-group","small-input"],["for","name"],["id","name","type","text","name","name","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["for","email"],["id","email","type","email","name","email","required","",3,"ngModelChange","ngModel"],[1,"form-group"],["for","body"],["id","body","name","body","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"no-comments"],[1,"comments-list"],["class","comment",4,"ngFor","ngForOf"],[1,"comment"],[1,"comment-body"],[1,"comment-author"],[1,"error"]],template:function(m,i){m&1&&g(0,X,5,0,"div",4)(1,it,40,14,"div",5),m&2&&(a("ngIf",i.loading),r(),a("ngIf",i.postDetails))},dependencies:[G,F,N,$,R,z,L,j,U,B,A,q],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;width:100%;padding:2rem;gap:1rem;position:relative}.loading-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.loading-content[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0}.loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.post-details[_ngcontent-%COMP%]{padding:24px;max-width:800px;margin:0 auto;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.post-details[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.post-details[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:inline-block;padding:8px 16px;background-color:#007bff;color:#fff;text-decoration:none;border-radius:4px;transition:background-color .2s}.post-details[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.post-details   [_nghost-%COMP%]     .success-snackbar{background-color:#4caf50;color:#fff}.post-details   [_nghost-%COMP%]     .error-snackbar{background-color:#f44336;color:#fff}.post-details[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]{margin-bottom:24px}.post-details[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin:0 0 1rem;color:#333}.post-details[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{color:#666;font-style:italic}.post-details[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]{margin-bottom:24px;line-height:1.6;color:#444}.post-details[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .post-details[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}.post-details[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .form-group.small-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]{margin-top:2rem}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;color:#333}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;border-radius:4px;margin-bottom:1rem}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]:last-child{margin-bottom:2rem}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-body[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#333}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]{margin-bottom:2rem}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:300px;margin:0 auto}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:300px}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;border-radius:8px;font-size:1rem}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:20px;padding:.375rem}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group.small-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:20px;padding:.375rem;width:300px}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical;width:300px}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:.75rem 1rem;border-radius:8px;cursor:pointer;font-size:1rem;transition:background .2s;width:100%}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .no-comments[_ngcontent-%COMP%]{color:#666;text-align:center;padding:1rem}.post-details[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]{margin-top:5px;font-size:.9em;color:#666}"]})}}return e})();export{Ct as PostDetailsComponent};
